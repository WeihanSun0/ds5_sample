# DS5を用いるAR向けのUpsamplingアルゴリズム開発
----
## 1.背景・概要
本ドキュメントは、DS5を用いるAR応用に向け、Upsamplingアルゴリズム開発に関するレポートである。<br>

スマートフォンが普及と伴に、モバイル性の高いイメージセンサーへの要求も増えてくる。また、AI技術とハードウェアの進歩により、撮影だけではなく様々な応用（アプリ）がスマートフォンに搭載された。そのうち、AR（Augmented Reality）が一つの注目されてる応用であり、これから産業に活躍になると期待されている。<br>
SSS社がモバイル用のイメージセンサ領域に優勢を取る上に、様々なセンシング技術に取り組んで行く。DSシリーズがモバイル向けのdToFセンサーであり、今年（FY22）に新しいメンバーのDS5がリリースされた。前身のDS4と比べ、近距離測距点が密になり、出力FPS（Frames Per Second）も改善された。<br>
しかし、ARの応用には高い解像度（画像センサーと同じ解像度）のデプス出力が求められるため、dToFからの直接な測距点（ローデータ）がなかなか満足できない。だから、ローデータに基づいて、密な信号に補完するUpsamplingという技術が必要となる。今までDS4に対して応用に応じる幾つのUpsampling方法を開発したが、ARの用途が初めてある。また、DS5の特性に合わせ、調整する必要がある。このため、DS5の特性を配慮しAR向けのUspampling手法の開発した。<br>
本レポートは、課題と対策、及び手法の詳細と評価結果などについて報告であり、以下の構成となる。
第２章では、DS5、AR、Uspamplingを紹介する。
第３章では、要求された指標と設計方針について述べる。
第４章では、課題と対策を説明する。
第５章は、APIの実装と使用の詳細である。
第６章では、検証方法と結果を紹介する。
最後は、まとめである。


## 2.関連技術紹介
### 2.1 DS5
* 開発スケジュール
* 特性（スピード、FOVなど）
  * flood
  * spot
  * RGB
  * intensity
* 写真
### 2.2 AR
* セグメンテーションのタスク
* 要求
  * スピード
  * エッジ部分
### 2.3 Upsampling
* 概説
* DNNベースとフィルタベースの比較
* 今までのアルゴリズム

## 3. 設計前提と方針
### 3.1 性能指標
* スピード：120FPS
* 精度：エッジ部分のRecallとPrecision
### 3.2 入出力データ
* 使えるものと実際使うもの
* DSViewerでのデータ取得


## 4. アルゴリズムの検討
### 4.1 課題
* スピード
  * 前のバージョン
* 視差ズレ
  
### 4.2 対策
* スピード
  * メーン処理の検討
* 視差ズレ
  * RGBからのエッジ抽出
  * depthからのエッジ抽出

## 5. APIの実装・実行
### 5.1 処理流れ
* 全体のデータフロー
* API内部の並列処理
### 5.2 APIの使用
* APIの説明
### 5.3 サンプルアプリ
* 用意のサンプルアプリの機能
  * API使用例
  * 結果確認
  * パラメータ調整
### 5.4 パラメータ調整
* アルゴリズムの説明に合わせて、パラメータとその作用の説明

## 6. 検証・評価
* セグメンテーションの実験結果

## 7. まとめ
* 課題・対策
* できたこと
  * スピード・精度
  * APIとサンプルアプリ
* 今後の予定
  * Intensityの使用








